# taken from an example http://cran.r-project.org/doc/manuals/R-exts.html#Using-Makevars
# this is meant to both compile the C files in src/ and run the makefile in src/libssh2/

.PHONY: all libssh2

all: $(SHLIB)

$(SHLIB): libssh2

# http://stackoverflow.com/questions/2206128/makefile-calling-another-makefile
libssh2:
	cd libssh2-1.4.3 && make
	cp libssh2-1.4.3/src/.libs/*.o . # we copy the .o files so they get bundled into the shared library (.so file)
	cp libssh2-1.4.3/src/*.c . # INSTALL only takes the .o files that have corresponding .c files